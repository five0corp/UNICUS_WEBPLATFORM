<?php

use Illuminate\Http\Request;
use Illuminate\Support\Facades\Route;
use App\Http\Controllers\MetamaskController;


Route::get('/clear', function(){
    \Illuminate\Support\Facades\Artisan::call('optimize:clear');
});
/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
*/
Route::get('test/ipfs', 'TestController@index')->name('ipfs');
Route::get('test/ipfs12', 'TestController@view')->name('ipfs12');
Route::get('cron/btc/rate', 'CronController@index')->name('cron');
Route::get('mail-test','TestController@mailsend')->name('mail-test');


Route::namespace('Gateway')->prefix('ipn')->name('ipn.')->group(function () {
    Route::post('paypal', 'Paypal\ProcessController@ipn')->name('Paypal');
    Route::get('paypal-sdk', 'PaypalSdk\ProcessController@ipn')->name('PaypalSdk');
    Route::post('perfect-money', 'PerfectMoney\ProcessController@ipn')->name('PerfectMoney');
    Route::post('stripe', 'Stripe\ProcessController@ipn')->name('Stripe');
    Route::post('stripe-js', 'StripeJs\ProcessController@ipn')->name('StripeJs');
    Route::post('stripe-v3', 'StripeV3\ProcessController@ipn')->name('StripeV3');
    Route::post('skrill', 'Skrill\ProcessController@ipn')->name('Skrill');
    Route::post('paytm', 'Paytm\ProcessController@ipn')->name('Paytm');
    Route::post('payeer', 'Payeer\ProcessController@ipn')->name('Payeer');
    Route::post('paystack', 'Paystack\ProcessController@ipn')->name('Paystack');
    Route::post('voguepay', 'Voguepay\ProcessController@ipn')->name('Voguepay');
    Route::get('flutterwave/{trx}/{type}', 'Flutterwave\ProcessController@ipn')->name('Flutterwave');
    Route::post('razorpay', 'Razorpay\ProcessController@ipn')->name('Razorpay');
    Route::post('instamojo', 'Instamojo\ProcessController@ipn')->name('Instamojo');
    Route::get('blockchain', 'Blockchain\ProcessController@ipn')->name('Blockchain');
    Route::get('blockio', 'Blockio\ProcessController@ipn')->name('Blockio');
    Route::post('coinpayments', 'Coinpayments\ProcessController@ipn')->name('Coinpayments');
    Route::post('coinpayments-fiat', 'Coinpayments_fiat\ProcessController@ipn')->name('CoinpaymentsFiat');
    Route::post('coingate', 'Coingate\ProcessController@ipn')->name('Coingate');
    Route::post('coinbase-commerce', 'CoinbaseCommerce\ProcessController@ipn')->name('CoinbaseCommerce');
    Route::get('mollie', 'Mollie\ProcessController@ipn')->name('Mollie');
    Route::post('cashmaal', 'Cashmaal\ProcessController@ipn')->name('Cashmaal');
    Route::post('authorize-net', 'AuthorizeNet\ProcessController@ipn')->name('AuthorizeNet');
    Route::post('2check-out', 'TwoCheckOut\ProcessController@ipn')->name('TwoCheckOut');
    Route::post('mercado-pago', 'MercadoPago\ProcessController@ipn')->name('MercadoPago');
});

// User Support Ticket
Route::prefix('ticket')->group(function () {
    Route::get('/', 'TicketController@supportTicket')->name('ticket');
    Route::get('/new', 'TicketController@openSupportTicket')->name('ticket.open');
    Route::post('/create', 'TicketController@storeSupportTicket')->name('ticket.store');
    Route::get('/view/{ticket}', 'TicketController@viewTicket')->name('ticket.view');
    Route::post('/reply/{ticket}', 'TicketController@replyTicket')->name('ticket.reply');
    Route::get('/download/{ticket}', 'TicketController@ticketDownload')->name('ticket.download');
});

/*
|--------------------------------------------------------------------------
| Start Admin Area
|--------------------------------------------------------------------------
*/

Route::namespace('Admin')->prefix('admin')->name('admin.')->group(function () {
    Route::namespace('Auth')->group(function () {
        Route::get('/', 'LoginController@showLoginForm')->name('login');
        Route::post('/', 'LoginController@login')->name('login');
        Route::get('logout', 'LoginController@logout')->name('logout');
        // Admin Password Reset
        Route::get('password/reset', 'ForgotPasswordController@showLinkRequestForm')->name('password.reset');
        Route::post('password/reset', 'ForgotPasswordController@sendResetCodeEmail');
        Route::post('password/verify-code', 'ForgotPasswordController@verifyCode')->name('password.verify.code');
        Route::get('password/reset/{token}', 'ResetPasswordController@showResetForm')->name('password.reset.form');
        Route::post('password/reset/change', 'ResetPasswordController@reset')->name('password.change');
    });

    Route::middleware('admin')->group(function () {
        Route::post('store-withdraw-transactions', 'WithdrawalController@store_withdrawal_transaction')->name('store-withdraw-transactions');
        Route::get('dashboard', 'AdminController@dashboard')->name('dashboard');
        Route::get('sold-out', 'AdminController@sold_out')->name('sold-out');
        Route::get('transaction-details/{id}', 'AdminController@transaction_details')->name('transaction-details');
        Route::get('profile', 'AdminController@profile')->name('profile');
        Route::post('profile', 'AdminController@profileUpdate')->name('profile.update');
        Route::get('password', 'AdminController@password')->name('password');
        Route::post('password', 'AdminController@passwordUpdate')->name('password.update');

        //Notification
        Route::get('notifications','AdminController@notifications')->name('notifications');
        Route::get('notification/read/{id}','AdminController@notificationRead')->name('notification.read');
        Route::get('notifications/read-all','AdminController@readAll')->name('notifications.readAll');

        //home manage
        Route::get('home/manage', 'ManageHomeController@index')->name('manage.home');
        Route::post('home/update', 'ManageHomeController@update')->name('home.update');

        //home manage
        Route::get('social-links/manage', 'ManageHomeController@socialLink')->name('manage.social-links');
        Route::post('social-links/update', 'ManageHomeController@updateSocialLink')->name('social-links.update');
        
        //home manage
        Route::get('top-banner', 'TopBannerController@index')->name('top-banner');
        Route::post('top-banner', 'TopBannerController@update')->name('top-banner.update');

        //Report Bugs
        Route::get('request-report','AdminController@requestReport')->name('request.report');
        Route::post('request-report','AdminController@reportSubmit');
        Route::get('system-info','AdminController@systemInfo')->name('system.info');

        // Users Manager
        Route::get('users', 'ManageUsersController@allUsers')->name('users.all');
        Route::get('users/active', 'ManageUsersController@activeUsers')->name('users.active');
        Route::get('users/banned', 'ManageUsersController@bannedUsers')->name('users.banned');
        Route::get('users/email-verified', 'ManageUsersController@emailVerifiedUsers')->name('users.email.verified');
        Route::get('users/email-unverified', 'ManageUsersController@emailUnverifiedUsers')->name('users.email.unverified');
        Route::get('users/sms-unverified', 'ManageUsersController@smsUnverifiedUsers')->name('users.sms.unverified');
        Route::get('users/sms-verified', 'ManageUsersController@smsVerifiedUsers')->name('users.sms.verified');
        Route::get('users/with-balance', 'ManageUsersController@usersWithBalance')->name('users.with.balance');

        Route::get('users/{scope}/search', 'ManageUsersController@search')->name('users.search');
        Route::get('user/detail/{id}', 'ManageUsersController@detail')->name('users.detail');
        Route::get('user/delete/{id}', 'ManageUsersController@delete')->name('users.delete');
        Route::post('user/update/{id}', 'ManageUsersController@update')->name('users.update');
        Route::post('user/add-sub-balance/{id}', 'ManageUsersController@addSubBalance')->name('users.add.sub.balance');
        Route::get('user/send-email/{id}', 'ManageUsersController@showEmailSingleForm')->name('users.email.single');
        Route::post('user/send-email/{id}', 'ManageUsersController@sendEmailSingle')->name('users.email.single');
        Route::get('user/login/{id}', 'ManageUsersController@login')->name('users.login');
        Route::get('user/transactions/{id}', 'ManageUsersController@transactions')->name('users.transactions');
        Route::get('user/deposits/{id}', 'ManageUsersController@deposits')->name('users.deposits');
        Route::get('user/deposits/via/{method}/{type?}/{userId}', 'ManageUsersController@depositViaMethod')->name('users.deposits.method');
        Route::get('user/withdrawals/{id}', 'ManageUsersController@withdrawals')->name('users.withdrawals');
        Route::get('user/withdrawals/via/{method}/{type?}/{userId}', 'ManageUsersController@withdrawalsViaMethod')->name('users.withdrawals.method');
        // Login History
        Route::get('users/login/history/{id}', 'ManageUsersController@userLoginHistory')->name('users.login.history.single');

        Route::get('users/send-email', 'ManageUsersController@showEmailAllForm')->name('users.email.all');
        Route::post('users/send-email', 'ManageUsersController@sendEmailAll')->name('users.email.send');
        Route::get('users/email-log/{id}', 'ManageUsersController@emailLog')->name('users.email.log');
        Route::get('users/email-details/{id}', 'ManageUsersController@emailDetails')->name('users.email.details');
        //use product
        Route::get('users/product/list/{id}', 'ManageUsersController@userProduct')->name('users.product.list');
        Route::get('users/sold/product/list/{id}', 'ManageUsersController@userSoldProduct')->name('users.sold.product.list');
        Route::get('users/purchase/product/list/{id}', 'ManageUsersController@userPurchaseProduct')->name('users.purchase.product.list');

        //Category
        Route::get('categories', 'CategoryController@index')->name('category.index');
        Route::post('category/store', 'CategoryController@store')->name('category.store');
        Route::post('category/update', 'CategoryController@update')->name('category.update');
        Route::get('category/specification/list/{id}', 'CategoryController@specification')->name('category.specification');
        Route::get('category/subcategory/list/{id}', 'CategoryController@subcategory')->name('category.subcategory.list');
        Route::get('category/delete/{id}', 'CategoryController@delete')->name('category.delete');

        //Sub category
        Route::get('subcategories', 'SubcategoryController@index')->name('category.subcategory.index');
        Route::post('subcategory/store', 'SubcategoryController@store')->name('subcategory.store');
        Route::post('subcategory/update', 'SubcategoryController@update')->name('subcategory.update');


         //policy-page
         Route::get('policy-page', 'PolicyPagesController@index')->name('policy-page.index');
         Route::get('policy-page/create', 'PolicyPagesController@create')->name('policy-page.create');
         Route::post('policy-page/store', 'PolicyPagesController@store')->name('policy-page.store');
         Route::get('policy-page/edit/{id}', 'PolicyPagesController@edit')->name('policy-page.edit');
         Route::post('policy-page/update', 'PolicyPagesController@update')->name('policy-page.update');
         Route::post('policy-page/delete', 'PolicyPagesController@delete')->name('policy-page.delete');


        //collections
        Route::get('collections', 'CollectionController@index')->name('collections.index');
        Route::post('collections/store', 'CollectionController@store')->name('collections.store');
        Route::post('collections/update', 'CollectionController@update')->name('collections.update');
        Route::post('collections/delete', 'CollectionController@delete')->name('collections.delete');


        //Brand
        Route::get('brands', 'BrandController@index')->name('brand.index');
        Route::post('brand/store', 'BrandController@store')->name('brand.store');
        Route::post('brand/update', 'BrandController@update')->name('brand.update');

        //specification
        Route::get('specification/list','SpecificationController@index')->name('specification.index');
        Route::post('specification/store','SpecificationController@store')->name('specification.store');
        Route::post('specification/update','SpecificationController@update')->name('specification.update');

        // manage product
        Route::post('product/saveMetamaskPaymentDetail', 'ProductController@saveEndAuctionPaymentDetail')->name('save-end-auction-payment-detail');
        Route::post('product/updateStartAuction', 'ProductController@updateProductAuctionStart')->name('update-product-start-auction');
        Route::post('product/updateEndAuction', 'ProductController@updateProductAuctionEnd')->name('update-product-end-auction');
        Route::get('product/list', 'ProductController@index')->name('product.index');
        Route::get('product/start', 'ProductController@start')->name('product.start');
        Route::get('product/started', 'ProductController@started')->name('product.started');
        Route::get('product/end_auction', 'ProductController@end_auction')->name('product.end_auction');
        Route::get('product/product-biddings', 'ProductController@product_biddings')->name('product.product-biddings');
        Route::get('product/product-bidding-details/{id}', 'ProductController@product_bidding_details')->name('product-bidding-details');
        Route::get('product/processed', 'ProductController@processed')->name('product.processed');
        Route::get('product/detail/{id}', 'ProductController@detail')->name('product.detail');
        Route::get('product/approved/list', 'ProductController@approved')->name('product.approved');
        Route::get('product/pending/list', 'ProductController@pending')->name('product.pending');
        Route::get('product/cancel/list', 'ProductController@cancel')->name('product.cancel');
        Route::get('product/expired/list', 'ProductController@expired')->name('product.expired');
        Route::post('product/approveby/', 'ProductController@approvBy')->name('product.approveby');
        Route::post('product/cancelby/', 'ProductController@cancelBy')->name('product.cancelby');
        Route::get('product/category/search/{scope}', 'ProductController@productCategorySearch')->name('product.category');
        Route::get('product/search/{scope}', 'ProductController@search')->name('product.search');
        Route::post('product/featured/include', 'ProductController@featuredInclude')->name('product.featured.include');
        Route::post('product/featured/remove', 'ProductController@featuredNotInclude')->name('product.featured.remove');
        Route::get('product/report', 'ProductController@productReport')->name('product.report');

        // Order Proudct
        Route::get('order/list', 'OrderController@index')->name('order.index');
        Route::get('pending/order/list', 'OrderController@pending')->name('order.pending');
        Route::get('complated/order/list', 'OrderController@complated')->name('order.complated');
        Route::get('in-process/order/list', 'OrderController@inProcess')->name('order.inProcess');
        Route::get('shipped/order/list', 'OrderController@shipped')->name('order.shipped');
        Route::get('onhold/order/list', 'OrderController@onHold')->name('order.onHold');
        Route::get('disputed/order/list', 'OrderController@disputed')->name('order.disputed');
        Route::get('cancelled/order/list', 'OrderController@cancelled')->name('order.cancelled');
        Route::post('order/refund', 'OrderController@refund')->name('order.refund');
        Route::post('order/resolved', 'OrderController@resolved')->name('order.resolved');
        Route::get('order/search', 'OrderController@search')->name('order.search');

        //Advertisement
        Route::get('advertisement/list', 'AdvertisementController@index')->name('ads.index');
        Route::get('advertisement/edit/{id}', 'AdvertisementController@edit')->name('ads.edit');
        Route::post('advertisement/store', 'AdvertisementController@store')->name('ads.store');
        Route::post('advertisement/update/{id}', 'AdvertisementController@update')->name('ads.update');
        Route::post('advertisement/delete', 'AdvertisementController@delete')->name('ads.delete');

         //Transaction
        Route::get('transaction/list', 'TransactionController@index')->name('transactions.index');
        
        Route::get('transaction/edit/{id}', 'TransactionController@edit')->name('transactions.edit');
        Route::post('transaction/store', 'TransactionController@store')->name('transactions.store');
        Route::post('transaction/update/{id}', 'TransactionController@update')->name('transactions.update');
        Route::post('transaction/delete', 'TransactionController@delete')->name('transactions.delete');
        Route::get('transaction/{scope}/search', 'TransactionController@search')->name('transaction.search');
        
        //Transaction Payment
        Route::get('transactionpayment/list', 'TransactionPaymentController@index')->name('transactionPayments.index');
        
        Route::get('transactionpayment/edit/{id}', 'TransactionPaymentController@edit')->name('transactionPayments.edit');
        Route::post('transactionpayment/store', 'TransactionPaymentController@store')->name('transactionPayments.store');
        Route::post('transactionpayment/update/{id}', 'TransactionPaymentController@update')->name('transactionPayments.update');
        Route::post('transactionpayment/delete', 'TransactionPaymentController@delete')->name('transactionPayments.delete');
        Route::get('transactionpayment/{scope}/search', 'TransactionPaymentController@search')->name('transactionPayment.search');
        
        //Slider
        Route::get('slider', 'SliderController@index')->name('slider.index');
        Route::post('slider/store', 'SliderController@store')->name('slider.store');
        Route::post('slider/update', 'SliderController@update')->name('slider.update');
        Route::get('slider/delete/{id}', 'SliderController@delete')->name('slider.delete');

        //Slider
        Route::get('partners', 'PartnerController@index')->name('partners.index');
        Route::post('partners/store', 'PartnerController@store')->name('partners.store');
        Route::post('partners/update', 'PartnerController@update')->name('partners.update');

         //Product
         Route::get('product/list', 'ProductController@index')->name('product.index');
         Route::get('product/create', 'ProductController@create')->name('product.create');
         Route::get('product/edit/{id}', 'ProductController@edit')->name('product.edit');
         Route::get('product/delete/{id}', 'ProductController@delete')->name('product.delete');
         Route::post('product/update/{id}', 'ProductController@update')->name('product.update');
         Route::post('product/store', 'ProductController@store')->name('product.store');
         Route::get('add/product/specification/{id}', 'ProductController@addSpecification')->name('add.product.specification');
         Route::post('store/product/specification/{id}', 'ProductController@storeSpecification')->name('store.product.specification');

         
        // Deposit Gateway
        Route::name('gateway.')->prefix('gateway')->group(function(){
            // Automatic Gateway
            Route::get('automatic', 'GatewayController@index')->name('automatic.index');
            Route::get('automatic/edit/{alias}', 'GatewayController@edit')->name('automatic.edit');
            Route::post('automatic/update/{code}', 'GatewayController@update')->name('automatic.update');
            Route::post('automatic/remove/{code}', 'GatewayController@remove')->name('automatic.remove');
            Route::post('automatic/activate', 'GatewayController@activate')->name('automatic.activate');
            Route::post('automatic/deactivate', 'GatewayController@deactivate')->name('automatic.deactivate');

            // Manual Methods
            Route::get('manual', 'ManualGatewayController@index')->name('manual.index');
            Route::get('manual/new', 'ManualGatewayController@create')->name('manual.create');
            Route::post('manual/new', 'ManualGatewayController@store')->name('manual.store');
            Route::get('manual/edit/{alias}', 'ManualGatewayController@edit')->name('manual.edit');
            Route::post('manual/update/{id}', 'ManualGatewayController@update')->name('manual.update');
            Route::post('manual/activate', 'ManualGatewayController@activate')->name('manual.activate');
            Route::post('manual/deactivate', 'ManualGatewayController@deactivate')->name('manual.deactivate');
        });


        // DEPOSIT SYSTEM
        Route::name('deposit.')->prefix('deposit')->group(function(){
            Route::get('/', 'DepositController@deposit')->name('list');
            Route::get('pending', 'DepositController@pending')->name('pending');
            Route::get('rejected', 'DepositController@rejected')->name('rejected');
            Route::get('approved', 'DepositController@approved')->name('approved');
            Route::get('successful', 'DepositController@successful')->name('successful');
            Route::get('details/{id}', 'DepositController@details')->name('details');

            Route::post('reject', 'DepositController@reject')->name('reject');
            Route::post('approve', 'DepositController@approve')->name('approve');
            Route::get('via/{method}/{type?}', 'DepositController@depositViaMethod')->name('method');
            Route::get('/{scope}/search', 'DepositController@search')->name('search');
            Route::get('date-search/{scope}', 'DepositController@dateSearch')->name('dateSearch');

        });

        // WITHDRAW SYSTEM
        Route::name('withdraw.')->prefix('withdraw')->group(function(){
            Route::get('pending', 'WithdrawalController@pending')->name('pending');
            Route::get('approved', 'WithdrawalController@approved')->name('approved');
            Route::get('rejected', 'WithdrawalController@rejected')->name('rejected');
            Route::get('log', 'WithdrawalController@log')->name('log');
            Route::get('via/{method_id}/{type?}', 'WithdrawalController@logViaMethod')->name('method');
            Route::get('{scope}/search', 'WithdrawalController@search')->name('search');
            Route::get('date-search/{scope}', 'WithdrawalController@dateSearch')->name('dateSearch');
            Route::get('details/{id}', 'WithdrawalController@details')->name('details');
            Route::post('approve', 'WithdrawalController@approve')->name('approve');
            Route::post('reject', 'WithdrawalController@reject')->name('reject');
            Route::get('withdraw-amounts', 'WithdrawalController@withdraw_amounts')->name('withdraw-amounts');
            Route::get('withdraw-transactions', 'WithdrawalController@withdraw_transactions')->name('withdraw-transactions');
            Route::get('withdraw-transaction-details/{id}', 'WithdrawalController@withdraw_transaction_details')->name('withdraw-transaction-details');

            // Withdraw Method
            Route::get('method/', 'WithdrawMethodController@methods')->name('method.index');
            Route::get('method/create', 'WithdrawMethodController@create')->name('method.create');
            Route::post('method/create', 'WithdrawMethodController@store')->name('method.store');
            Route::get('method/edit/{id}', 'WithdrawMethodController@edit')->name('method.edit');
            Route::post('method/edit/{id}', 'WithdrawMethodController@update')->name('method.update');
            Route::post('method/activate', 'WithdrawMethodController@activate')->name('method.activate');
            Route::post('method/deactivate', 'WithdrawMethodController@deactivate')->name('method.deactivate');
        });

        // Report
        Route::get('report/transaction', 'ReportController@transaction')->name('report.transaction');
        Route::get('report/transaction/search', 'ReportController@transactionSearch')->name('report.transaction.search');
        Route::get('report/login/history', 'ReportController@loginHistory')->name('report.login.history');
        Route::get('report/login/ipHistory/{ip}', 'ReportController@loginIpHistory')->name('report.login.ipHistory');
        Route::get('report/email/history', 'ReportController@emailHistory')->name('report.email.history');


        // Admin Support
        Route::get('tickets', 'SupportTicketController@tickets')->name('ticket');
        Route::get('tickets/pending', 'SupportTicketController@pendingTicket')->name('ticket.pending');
        Route::get('tickets/closed', 'SupportTicketController@closedTicket')->name('ticket.closed');
        Route::get('tickets/answered', 'SupportTicketController@answeredTicket')->name('ticket.answered');
        Route::get('tickets/view/{id}', 'SupportTicketController@ticketReply')->name('ticket.view');
        Route::post('ticket/reply/{id}', 'SupportTicketController@ticketReplySend')->name('ticket.reply');
        Route::get('ticket/download/{ticket}', 'SupportTicketController@ticketDownload')->name('ticket.download');
        Route::post('ticket/delete', 'SupportTicketController@ticketDelete')->name('ticket.delete');


        // Language Manager
        Route::get('/language', 'LanguageController@langManage')->name('language.manage');
        Route::post('/language', 'LanguageController@langStore')->name('language.manage.store');
        Route::post('/language/delete/{id}', 'LanguageController@langDel')->name('language.manage.del');
        Route::post('/language/update/{id}', 'LanguageController@langUpdate')->name('language.manage.update');
        Route::get('/language/edit/{id}', 'LanguageController@langEdit')->name('language.key');
        Route::post('/language/import', 'LanguageController@langImport')->name('language.importLang');



        Route::post('language/store/key/{id}', 'LanguageController@storeLanguageJson')->name('language.store.key');
        Route::post('language/delete/key/{id}', 'LanguageController@deleteLanguageJson')->name('language.delete.key');
        Route::post('language/update/key/{id}', 'LanguageController@updateLanguageJson')->name('language.update.key');



        // General Setting
        Route::get('general-setting', 'GeneralSettingController@index')->name('setting.index');
        Route::post('general-setting', 'GeneralSettingController@update')->name('setting.update');
        Route::get('optimize', 'GeneralSettingController@optimize')->name('setting.optimize');

        // Logo-Icon
        Route::get('setting/logo-icon', 'GeneralSettingController@logoIcon')->name('setting.logo.icon');
        Route::post('setting/logo-icon', 'GeneralSettingController@logoIconUpdate')->name('setting.logo.icon');

        //Custom CSS
        Route::get('custom-css','GeneralSettingController@customCss')->name('setting.custom.css');
        Route::post('custom-css','GeneralSettingController@customCssSubmit');

        //Cookie
        Route::get('cookie','GeneralSettingController@cookie')->name('setting.cookie');
        Route::post('cookie','GeneralSettingController@cookieSubmit');

        // Plugin
        Route::get('extensions', 'ExtensionController@index')->name('extensions.index');
        Route::post('extensions/update/{id}', 'ExtensionController@update')->name('extensions.update');
        Route::post('extensions/activate', 'ExtensionController@activate')->name('extensions.activate');
        Route::post('extensions/deactivate', 'ExtensionController@deactivate')->name('extensions.deactivate');

        // Email Setting
        Route::get('email-template/global', 'EmailTemplateController@emailTemplate')->name('email.template.global');
        Route::post('email-template/global', 'EmailTemplateController@emailTemplateUpdate')->name('email.template.global');
        Route::get('email-template/setting', 'EmailTemplateController@emailSetting')->name('email.template.setting');
        Route::post('email-template/setting', 'EmailTemplateController@emailSettingUpdate')->name('email.template.setting');
        Route::get('email-template/index', 'EmailTemplateController@index')->name('email.template.index');
        Route::get('email-template/{id}/edit', 'EmailTemplateController@edit')->name('email.template.edit');
        Route::post('email-template/{id}/update', 'EmailTemplateController@update')->name('email.template.update');
        Route::post('email-template/send-test-mail', 'EmailTemplateController@sendTestMail')->name('email.template.test.mail');


        // SMS Setting
        Route::get('sms-template/global', 'SmsTemplateController@smsTemplate')->name('sms.template.global');
        Route::post('sms-template/global', 'SmsTemplateController@smsTemplateUpdate')->name('sms.template.global');
        Route::get('sms-template/setting','SmsTemplateController@smsSetting')->name('sms.templates.setting');
        Route::post('sms-template/setting', 'SmsTemplateController@smsSettingUpdate')->name('sms.template.setting');
        Route::get('sms-template/index', 'SmsTemplateController@index')->name('sms.template.index');
        Route::get('sms-template/edit/{id}', 'SmsTemplateController@edit')->name('sms.template.edit');
        Route::post('sms-template/update/{id}', 'SmsTemplateController@update')->name('sms.template.update');
        Route::post('email-template/send-test-sms', 'SmsTemplateController@sendTestSMS')->name('sms.template.test.sms');

        // SEO
        Route::get('seo', 'FrontendController@seoEdit')->name('seo');
        // Frontend
        Route::name('frontend.')->prefix('frontend')->group(function () {
            Route::get('templates', 'FrontendController@templates')->name('templates');
            Route::post('templates', 'FrontendController@templatesActive')->name('templates.active');
            
            Route::get('frontend-sections/{key}', 'FrontendController@frontendSections')->name('sections');
            Route::post('frontend-content/{key}', 'FrontendController@frontendContent')->name('sections.content');
            Route::get('frontend-element/{key}/{id?}', 'FrontendController@frontendElement')->name('sections.element');
            Route::post('remove', 'FrontendController@remove')->name('remove');

            // Page Builder
            Route::get('manage-pages', 'PageBuilderController@managePages')->name('manage.pages');
            Route::post('manage-pages', 'PageBuilderController@managePagesSave')->name('manage.pages.save');
            Route::post('manage-pages/update', 'PageBuilderController@managePagesUpdate')->name('manage.pages.update');
            Route::post('manage-pages/delete', 'PageBuilderController@managePagesDelete')->name('manage.pages.delete');
            Route::get('manage-section/{id}', 'PageBuilderController@manageSection')->name('manage.section');
            Route::post('manage-section/{id}', 'PageBuilderController@manageSectionUpdate')->name('manage.section.update');
        });


        Route::get('blogs', 'BlogController@index')->name('blogs');
        // Route::post('blogs/content', 'BlogController@frontendContent')->name('blogs.content');
        Route::get('blogs/content/{id?}', 'BlogController@blogDetail')->name('blogs.detail');
        Route::post('blogs/store', 'BlogController@store')->name('blogs.store');
        Route::post('blogs/update/{id?}', 'BlogController@update')->name('blogs.update');
        Route::post('blogs/remove', 'BlogController@remove')->name('blogs.remove');

        Route::get('articles', 'ArticleController@index')->name('articles');
        // Route::post('blogs/content', 'BlogController@frontendContent')->name('blogs.content');
        Route::get('articles/content/{id?}', 'ArticleController@detail')->name('articles.detail');
        Route::post('articles/store', 'ArticleController@store')->name('articles.store');
        Route::post('articles/update/{id?}', 'ArticleController@update')->name('articles.update');
        Route::post('articles/remove', 'ArticleController@remove')->name('articles.remove');


        //community Category
        Route::get('community-categories', 'CommunityCategoryController@index')->name('community-category.index');
        Route::post('community-category/store', 'CommunityCategoryController@store')->name('community-category.store');
        Route::post('community-category/update', 'CommunityCategoryController@update')->name('community-category.update');
        // Route::get('community-category/specification/list/{id}', 'CommunityCategoryController@specification')->name('category.specification');
        // Route::get('community-category/subcategory/list/{id}', 'CommunityCategoryController@subcategory')->name('category.subcategory.list');


    });
});



Route::name('user.')->group(function () {
    Route::get('/login', 'Auth\LoginController@showLoginForm')->name('login');
    Route::post('/login', 'Auth\LoginController@login');

    //Social login
	Route::get('auth/google', 'Auth\LoginController@redirectToGoogle')->name('googleLogin');
	Route::get('auth/google/callback', 'Auth\LoginController@handleGoogleCallback')->name('googleCallback');

    
    Route::get('logout', 'Auth\LoginController@logout')->name('logout');

    Route::get('register', 'Auth\RegisterController@showRegistrationForm')->name('register');
    Route::post('register', 'Auth\RegisterController@register')->middleware('regStatus');
    Route::post('check-mail', 'Auth\RegisterController@checkUser')->name('checkUser');

    Route::get('password/reset', 'Auth\ForgotPasswordController@showLinkRequestForm')->name('password.request');
    Route::post('password/email', 'Auth\ForgotPasswordController@sendResetCodeEmail')->name('password.email');
    Route::get('password/code-verify', 'Auth\ForgotPasswordController@codeVerify')->name('password.code.verify');
    Route::post('password/reset', 'Auth\ResetPasswordController@reset')->name('password.update');
    Route::get('password/reset/{token}', 'Auth\ResetPasswordController@showResetForm')->name('password.reset');
    Route::post('password/verify-code', 'Auth\ForgotPasswordController@verifyCode')->name('password.verify.code');

    Route::get('/email-verify/{user}', 'Auth\RegisterController@emailVerify', function (Request $request) {
        if (!$request->hasValidSignature()) {
            abort(401);
        }
    
    })->name('email-verify')->middleware('signed');
    
});

Route::name('user.')->prefix('user')->group(function () {
    Route::middleware('auth')->group(function () {
        Route::get('authorization', 'AuthorizationController@authorizeForm')->name('authorization');
        Route::get('resend-verify', 'AuthorizationController@sendVerifyCode')->name('send.verify.code');
        Route::post('verify-email', 'AuthorizationController@emailVerification')->name('verify.email');
        Route::post('verify-sms', 'AuthorizationController@smsVerification')->name('verify.sms');
        Route::post('verify-g2fa', 'AuthorizationController@g2faVerification')->name('go2fa.verify');

        Route::middleware(['checkStatus'])->group(function () {
            Route::get('dashboard', 'UserController@home')->name('home');

            Route::get('profile-setting', 'UserController@profile')->name('profile.setting');
            Route::post('profile-setting', 'UserController@submitProfile');
            Route::get('change-password', 'UserController@changePassword')->name('change.password');
            Route::post('change-password', 'UserController@submitPassword');
            Route::get('my-bids', 'BidController@myBids')->name('my-bids');
            Route::get('won-bids', 'BidController@wonBids')->name('won-bids');
            //2FA
            Route::get('twofactor', 'UserController@show2faForm')->name('twofactor');
            Route::post('twofactor/enable', 'UserController@create2fa')->name('twofactor.enable');
            Route::post('twofactor/disable', 'UserController@disable2fa')->name('twofactor.disable');

            // Product Order
            Route::post('order', 'OrderController@store')->name('order.store');
            Route::get('order/payment', 'OrderController@payment')->name('order.payment');
            Route::post('order/payment/insert', 'OrderController@paymentInsert')->name('order.payment.insert');

            // Deposit
            Route::any('/deposit', 'Gateway\PaymentController@deposit')->name('deposit');
            Route::post('deposit/insert', 'Gateway\PaymentController@depositInsert')->name('deposit.insert');
            Route::get('deposit/preview', 'Gateway\PaymentController@depositPreview')->name('deposit.preview');
            Route::get('deposit/confirm', 'Gateway\PaymentController@depositConfirm')->name('deposit.confirm');
            Route::get('deposit/manual', 'Gateway\PaymentController@manualDepositConfirm')->name('deposit.manual.confirm');
            Route::post('deposit/manual', 'Gateway\PaymentController@manualDepositUpdate')->name('deposit.manual.update');
            Route::any('deposit/history', 'UserController@depositHistory')->name('deposit.history');
            Route::get('transaction/history', 'UserController@transactionHistory')->name('transaction.history');

            // Withdraw
            Route::get('/withdraw', 'UserController@withdrawMoney')->name('withdraw');
            Route::post('/withdraw', 'UserController@withdrawStore')->name('withdraw.money');
            Route::get('/withdraw/preview', 'UserController@withdrawPreview')->name('withdraw.preview');
            Route::post('/withdraw/preview', 'UserController@withdrawSubmit')->name('withdraw.submit');
            Route::get('/withdraw/history', 'UserController@withdrawLog')->name('withdraw.history');

            //sold product
            Route::get('order/list', 'OrderProductController@orderList')->name('order.list');
            Route::get('order/pending/list', 'OrderProductController@pending')->name('order.pending');
            Route::get('order/complete/list', 'OrderProductController@complete')->name('order.complete');
            Route::get('order/in-process/list', 'OrderProductController@process')->name('order.process');
            Route::get('order/shipped/list', 'OrderProductController@ship')->name('order.ship');
            Route::get('order/dispute/list', 'OrderProductController@dispute')->name('order.dispute');
            Route::get('order/cancel/list', 'OrderProductController@cancel')->name('order.cancel');
            
            Route::get('order/detail/{id}', 'OrderProductController@detail')->name('order.detail');
            Route::post('order/in-process/', 'OrderProductController@inProcess')->name('order.inprocess');
            Route::post('order/cancelled/', 'OrderProductController@cancelled')->name('order.cancelled');
            Route::post('order/shipped/', 'OrderProductController@shipped')->name('order.shipped');

            //purchase product
            Route::get('purchase/list', 'PurchaseProductController@index')->name('purchase.list');
            Route::post('purchase/product/dispute', 'PurchaseProductController@dispute')->name('purchase.product.dispute');
            Route::post('purchase/product/complated', 'PurchaseProductController@complated')->name('purchase.product.complated');


            //Product
            Route::get('product/list', 'ProductController@index')->name('product.index');
            Route::get('product/create', 'ProductController@create')->name('product.create');
            Route::get('product/edit/{id}', 'ProductController@edit')->name('product.edit');
            Route::post('product/update/{id}', 'ProductController@update')->name('product.update');
            Route::post('product/store', 'ProductController@store')->name('product.store');
            Route::get('add/product/specification/{id}', 'ProductController@addSpecification')->name('add.product.specification');
            Route::post('store/product/specification/{id}', 'ProductController@storeSpecification')->name('store.product.specification');

            //Product Review
            Route::post('product/review/store', 'ReviewController@store')->name('product.review.store');
            Route::post('product/report', 'UserController@report')->name('product.report');

            //Message 
            Route::post('contact/store', 'ContactController@store')->name('contact.store');
            Route::get('message', 'ContactController@send')->name('contact.send');
            Route::post('message/reply/store', 'ContactController@reply')->name('contact.reply');
            Route::get('reply/message/{id}', 'ContactController@read')->name('contact.read');
        });
    });
});

Route::get('/products', 'SiteController@product')->name('product');
Route::get('/category/products/{id}', 'SiteController@categoryProduct')->name('category.product');
Route::get('/subcategory/products/{id}', 'SiteController@subCategoryProduct')->name('subcategory.product');
Route::get('/products/filter', 'SiteController@productFilter')->name('product.filter');
Route::get('/user/{username}', 'SiteController@profile')->name('profile');
Route::get('/contact', 'SiteController@contact')->name('contact');
Route::get('/product/detail/{id}', 'SiteController@productDetails')->name('product.detail');
Route::post('/contact', 'SiteController@contactSubmit');
Route::get('/change/{lang?}', 'SiteController@changeLanguage')->name('lang');
Route::get('/cookie/accept', 'SiteController@cookieAccept')->name('cookie.accept');
Route::get('blog', 'SiteController@blog')->name('blog');
Route::get('blog/{id}/{slug}', 'SiteController@blogDetails')->name('blog.details');
Route::get('article-detail/{id}', 'SiteController@articleDetails')->name('article.details');

Route::get('community', 'SiteController@community')->name('community');
Route::get('my-nfts', 'SiteController@my_nfts')->name('my-nfts');
Route::get('my-trans', 'SiteController@my_trans')->name('my-transactions');
Route::get('transaction-details/{id}', 'SiteController@transaction_details')->name('transaction-details-front');
Route::get('community/{id}', 'SiteController@communityDetails')->name('community.details');

Route::get('placeholder-image/{size}', 'SiteController@placeholderImage')->name('placeholder.image');
Route::get('/{slug}', 'SiteController@pages')->name('pages');
Route::get('/', 'SiteController@index')->name('home');
Route::get('/add/{id}', 'SiteController@adclicked')->name('add.clicked');
Route::get('/menu/{slug}/{id}', 'SiteController@footerMenu')->name('footer.menu');
Route::get('comment/store', 'CommentController@store')->name('comment.store');

Route::get('user/community/add', 'CommunityController@index')->name('community.add');
Route::post('user/community/store', 'CommunityController@store')->name('community.store');
Route::get('announcement/detail/{id}', 'CommunityController@announcementDetail')->name('announcement.details');

Route::prefix('metamask')->group(function () {
    Route::post('/transaction/create', [MetamaskController::class, 'create'])->name('metamask.transaction.create');
});

Route::post('/bid-now', 'BidController@store')->name('bidNow');
Route::post('/save-place-bid-payment-detail', 'BidController@savePlaceBidPaymentDetailFunction')->name('savePlaceBidPaymentDetail');

Route::get('/page/{slug}', 'PolicyPageController@index')->name('page');
